<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- ì¹´í†¡ ë©”íƒ€ì´ë¯¸ì§€ -->
    <meta property="og:image" content="meta-image.png">
    <meta property="og:image:width" content="400">
    <meta property="og:image:height" content="210">
    <meta property="og:title" content="ì•ˆë””ì˜¥êµíšŒ 2026 ì²­ì§€ê¸°">
    <meta property="og:description" content="ì„±ë„ ì§ë¶„ ê²€ìƒ‰">
    <!-- íƒ€ì´í‹€ -->
    <title>ì•ˆë””ì˜¥êµíšŒ 2026 ì²­ì§€ê¸°</title>
    <style>
        :root {
            --primary: #99160c;
            --primary-dark: #6d1008;
            --primary-light: #b82e1f;
            --accent: #d4a574;
            --accent-light: #e8c9a0;
            --bg-warm: #faf6f2;
            --bg-card: #ffffff;
            --text-dark: #2d2926;
            --text-muted: #6b5f58;
            --border: #e8ddd4;
            --shadow: rgba(153, 22, 12, 0.08);
        }
        
        [data-theme="dark"] {
            --bg-warm: #1a1614;
            --bg-card: #252220;
            --text-dark: #f0ebe6;
            --text-muted: #a09890;
            --border: #3d3632;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', -apple-system, sans-serif;
            background: var(--bg-warm);
            min-height: 100vh;
            padding: 16px;
            color: var(--text-dark);
            transition: background 0.3s, color 0.3s;
        }
        
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px 0;
            position: relative;
        }
        
        .header h1 {
            color: var(--primary);
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }
        
        .header .subtitle {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .theme-toggle:hover {
            border-color: var(--primary);
        }
        
        .theme-toggle .label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        .search-box {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 12px var(--shadow);
            margin-bottom: 16px;
            border: 1px solid var(--border);
            transition: background 0.3s, border-color 0.3s;
        }
        
        .search-input-wrapper {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }
        
        #searchInput {
            flex: 1;
            padding: 14px 18px;
            font-size: 16px;
            border: 2px solid var(--border);
            border-radius: 12px;
            outline: none;
            transition: border-color 0.2s, box-shadow 0.2s, background 0.3s;
            -webkit-appearance: none;
            background: var(--bg-warm);
            color: var(--text-dark);
        }
        
        #searchInput:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(153, 22, 12, 0.1);
        }
        
        #searchInput::placeholder {
            color: var(--text-muted);
        }
        
        #searchBtn {
            padding: 14px 24px;
            font-size: 16px;
            font-weight: 600;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        #searchBtn:hover {
            background: var(--primary-dark);
        }
        
        #searchBtn:active {
            transform: scale(0.98);
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .stats span {
            background: var(--bg-warm);
            color: var(--text-muted);
            padding: 8px 14px;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
            transition: background 0.3s, border-color 0.3s;
        }
        
        .stats strong {
            color: var(--primary);
        }
        
        .results {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 16px;
            box-shadow: 0 2px 12px var(--shadow);
            max-height: 65vh;
            overflow-y: auto;
            border: 1px solid var(--border);
            -webkit-overflow-scrolling: touch;
            transition: background 0.3s, border-color 0.3s;
        }
        
        .result-count {
            text-align: center;
            color: var(--text-muted);
            margin-bottom: 16px;
            font-size: 0.9rem;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }
        
        .result-count strong {
            color: var(--primary);
        }
        
        .result-card {
            background: var(--bg-warm);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 4px solid var(--primary);
            animation: fadeIn 0.3s ease;
            transition: background 0.3s;
        }
        
        .result-card:last-child {
            margin-bottom: 0;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .member-header {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 6px;
        }
        
        .member-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .jejik-badge {
            display: inline-block;
            background: var(--primary-dark);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .member-church {
            font-size: 0.85rem;
            color: var(--primary);
            margin-bottom: 12px;
            font-weight: 500;
        }
        
        .committee-section {
            margin-bottom: 12px;
        }
        
        .committee-section:last-child {
            margin-bottom: 0;
        }
        
        .committee-title {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 6px;
            padding: 4px 0;
            border-bottom: 1px dashed var(--border);
        }
        
        .department-item {
            margin-left: 8px;
            margin-bottom: 6px;
        }
        
        .department-name {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 4px;
        }
        
        .position-list {
            margin-left: 12px;
            font-size: 0.78rem;
            color: var(--text-muted);
            line-height: 1.6;
        }
        
        .position-item {
            display: inline;
        }
        
        .position-item:not(:last-child)::after {
            content: ", ";
        }
        
        .other-positions {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dotted var(--border);
        }
        
        .other-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 4px;
        }
        
        .other-list {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
        }
        
        .other-tag {
            background: var(--border);
            color: var(--text-muted);
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
        }
        
        .search-hint, .no-result {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }
        
        .search-hint .icon, .no-result .icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .search-hint .hint-text {
            margin-top: 8px;
            font-size: 0.85rem;
            opacity: 0.7;
        }
        
        .highlight {
            color: var(--primary);
            background: rgba(153, 22, 12, 0.1);
            padding: 0 2px;
            border-radius: 3px;
        }
        
        .loading {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }
        
        .loading .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 12px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .error {
            text-align: center;
            padding: 40px 20px;
            color: #c0392b;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 12px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .theme-toggle {
                top: 16px;
                padding: 6px 10px;
            }
            
            .theme-toggle .label {
                display: none;
            }
            
            .search-box {
                padding: 16px;
            }
            
            .stats span {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .results {
                max-height: 60vh;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .header {
                padding: 12px 0;
                margin-bottom: 12px;
            }
            
            .header h1 {
                font-size: 1.3rem;
                padding-right: 50px;
            }
            
            .header .subtitle {
                font-size: 0.8rem;
            }
            
            .theme-toggle {
                top: 12px;
                right: 0;
                padding: 6px 10px;
                font-size: 1rem;
            }
            
            .search-box {
                padding: 14px;
                border-radius: 12px;
            }
            
            .search-input-wrapper {
                flex-direction: column;
                gap: 8px;
            }
            
            #searchInput {
                padding: 14px 16px;
                font-size: 16px;
                border-radius: 10px;
            }
            
            #searchBtn {
                padding: 14px;
                border-radius: 10px;
                width: 100%;
            }
            
            .stats {
                gap: 6px;
            }
            
            .stats span {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
            
            .results {
                padding: 12px;
                border-radius: 12px;
                max-height: 55vh;
            }
            
            .result-card {
                padding: 14px;
                border-radius: 10px;
            }
            
            .member-name {
                font-size: 1.1rem;
            }
            
            .search-hint .icon, .no-result .icon {
                font-size: 40px;
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ì•ˆë””ì˜¥êµíšŒ 2026 ì²­ì§€ê¸°</h1>
            <p class="subtitle">ì„±ë„ ì§ë¶„ ê²€ìƒ‰</p>
            <button class="theme-toggle" id="themeToggle" title="í…Œë§ˆ ë³€ê²½">
                <span class="icon">ğŸŒ™</span>
                <span class="label">ë‹¤í¬</span>
            </button>
        </header>
        
        <div class="search-box">
            <div class="search-input-wrapper">
                <input type="text" id="searchInput" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off" enterkeyhint="search" disabled>
                <button id="searchBtn" disabled>ê²€ìƒ‰</button>
            </div>
        </div>
        
        <div class="results" id="results">
            <div class="loading">
                <div class="spinner"></div>
                <div>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let memberData = null;
        let orgStructure = null;
        let positionToOrgMap = null;
        
        // ì œì§ ëª©ë¡
        const jejikList = ['ì¥ë¡œ', 'ì•ˆìˆ˜ì§‘ì‚¬', 'ê¶Œì‚¬', 'ì„œë¦¬ì§‘ì‚¬(ë‚¨)', 'ì„œë¦¬ì§‘ì‚¬(ì—¬)', 'ê¶Œì°°', 'ëª…ì˜ˆì¥ë¡œ', 'ëª…ì˜ˆê¶Œì‚¬', 'ì·¨ì„ì§‘ì‚¬', 'ì·¨ì„ê¶Œì‚¬', 'ì·¨ì„ ê¶Œì‚¬', 'í˜‘ë™ ì•ˆìˆ˜ì§‘ì‚¬', 'í˜‘ë™ ì¥ë¡œ', 'í˜‘ë™ ê¶Œì‚¬', 'ì§‘ì‚¬', 'ëª…ì˜ˆ ê¶Œì‚¬', 'ì·¨ì„ì¥ë¡œ'];
        
        // íŠ¹ë³„ ì§í•¨ (ì´ë¦„ -> ì§í•¨)
        const specialTitles = {
            'ê¹€ì€ì›': 'ë¶€ëª©ì‚¬',
            'ì‹¬ì¤€í˜¸': 'ë¶€ëª©ì‚¬',
            'ì´ìƒí—Œ': 'ë¶€ëª©ì‚¬',
            'ê¹€ì¸ì² ': 'ì „ë„ì‚¬',
            'ìµœë³µë‚¨': 'ì „ë„ì‚¬',
            'ê¹€í˜•ì›': 'ì „ë„ì‚¬',
            'ë°•ì—°ì‹¤': 'ì‚¬ëª¨',
            'ë°•ì• ìˆ™': 'ì‚¬ëª¨',
            'ê¹€í˜„ì§€': 'ì‚¬ëª¨',
            'ê¹€ìƒë¯¸': 'ì‚¬ëª¨',
            'ë°•ì§€ìœ¤': 'ì‚¬ëª¨'
        };
        
        // ì¡°ì§ êµ¬ì¡° ì •ì˜
        const organizationStructure = {
            "ëª©íšŒì§€ì›íŒ€": {
                type: "team",
                departments: ["ëª©íšŒì§€ì›íŒ€"]
            },
            "ì˜ˆë°°ìœ„ì›íšŒ": {
                type: "committee",
                departments: {
                    "ì˜ˆë°°êµ­": ["ì˜ˆë°°êµ­"],
                    "ì°¬ì–‘êµ­": ["ì°¬ì–‘êµ­", "ìƒ¬ë¡¬ì°¬ì–‘ëŒ€", "í• ë ë£¨ì•¼ì°¬ì–‘ëŒ€", "í˜¸ì‚°ë‚˜ì°¬ì–‘ëŒ€", "ì¤‘ì°½ë‹¨", "ì˜¤ì¼€ìŠ¤íŠ¸ë¼", "ì°¸ì†Œë¦¬"],
                    "ì¬ì •êµ­": ["ì¬ì •êµ­", "ì§€ì¶œë¶€"]
                }
            },
            "êµìœ¡í›ˆë ¨ìœ„ì›íšŒ": {
                type: "committee",
                departments: {
                    "êµìœ¡êµ­": ["êµìœ¡êµ­", "íƒœì˜ì•„ë¶€", "ìœ ì¹˜ë¶€", "ìœ ë…„ë¶€", "ìœ ì´ˆë“±ë¶€", "ì´ˆë“±ë¶€", "ì¤‘ë“±ë¶€", "ê³ ë“±ë¶€", "ì¤‘ê³ ë“±ë¶€", "ëŒ€í•™ë¶€", "ëŒ€í•™ì²­ë…„íšŒ", "ì²­ë…„1(ëŒ€í•™)", "ì²­ë…„2", "ì²­ë…„íšŒ", "ì˜ì–´ì˜ˆë°°ë¶€", "ì¤‘êµ­ì–´ì˜ˆë°°ë¶€"],
                    "í›ˆë ¨êµ­": ["í›ˆë ¨êµ­", "ë””ëª¨ë°ì œìì›"]
                }
            },
            "ì‚¬ë¬´ìœ„ì›íšŒ": {
                type: "committee",
                departments: {
                    "ì‚¬ë¬´êµ­": ["ì‚¬ë¬´êµ­"],
                    "ê²½ì¡°êµ­": ["ê²½ì¡°êµ­"],
                    "ì°¨ëŸ‰êµ­": ["ì°¨ëŸ‰êµ­"],
                    "ì‹œì„¤ì•ˆì „êµ­": ["ì‹œì„¤êµ­", "ì‹œì„¤ì•ˆì „êµ­"]
                }
            },
            "ì„ êµìœ„ì›íšŒ": {
                type: "committee",
                departments: {
                    "í•´ì™¸ì„ êµêµ­": ["í•´ì™¸ì„ êµêµ­"],
                    "êµ­ë‚´ì„ êµêµ­": ["êµ­ë‚´ì„ êµêµ­"],
                    "í‰ì‹ ë„ì„ êµêµ­": ["í‰ì‹ ë„ì„ êµêµ­"],
                    "ë¯¸ë””ì–´ì„ êµêµ­": ["ë¯¸ë””ì–´ì„ êµêµ­"],
                    "ì‚°ì—…ì„ êµêµ­": ["ì‚°ì—…ì„ êµêµ­"],
                    "ê³µë‹¨ì„ êµêµ­": ["ê³µë‹¨ì„ êµêµ­"],
                    "ë†ì•„ì¸ì„ êµêµ­": ["ë†ì•„ì¸ì„ êµêµ­", "ìˆ˜í™”í†µì—­ì"],
                    "ì²´ìœ¡ì„ êµêµ­": ["ì²´ìœ¡ì„ êµêµ­"]
                }
            },
            "ì¼ì²œì§€êµíšŒ": {
                type: "committee",
                departments: {
                    "ì§€êµíšŒ": ["ê°•ì„œì§€êµíšŒ", "ê±°ì°½ì§€êµíšŒ", "ê²½ì£¼ì§€êµíšŒ", "ëŒ€ì „ì§€êµíšŒ", "ëª½ê³¨ì§€êµíšŒ", "ë¶ëŒ€êµ¬ì§€êµíšŒ", "ë¶ë¶€ì‚°ì§€êµíšŒ", "ë¶€ì—¬ì§€êµíšŒ", "ë¶„ë‹¹ë³¸êµíšŒ", "ë¶„ë‹¹ì§€êµíšŒ", "ìƒì£¼ì§€êµíšŒ", "ì„œëŒ€êµ¬ì§€êµíšŒ", "ì„±ë‚¨ìœ„ë¡€ì§€êµíšŒ", "ì„±ì£¼ì§€êµíšŒ", "ìˆ˜ì›ì§€êµíšŒ", "ì˜ì£¼ì§€êµíšŒ", "ì¼ë³¸ì§€êµíšŒ", "ì¼ì‚°ì§€êµíšŒ", "ì°½ì›ì§€êµíšŒ", "ì²­ë„ì§€êµíšŒ", "í¬í•­ì§€êµíšŒ", "í•„ë¦¬í•€"],
                    "ì „ë¬¸êµíšŒ": ["ê³µë‹¨ì „ë¬¸êµíšŒ", "êµ¬í‰ì§„í‰ì „ë¬¸êµíšŒ", "ê³ ë ¤ëŒ€ì „ë¬¸êµíšŒ", "ë„ëŸ‰ì›í˜¸ì „ë¬¸êµíšŒ", "ëŒ€ë§Œì „ë¬¸êµíšŒ", "ë´‰ê³¡ì „ë¬¸êµíšŒ", "ë¶ì‚¼ì „ë¬¸êµíšŒ", "ìƒëª¨ì‚¬ê³¡ì„ì€ì „ë¬¸êµíšŒ", "ì„ì ì „ë¬¸êµíšŒ", "ì‹ í‰ë¹„ì‚°ì „ë¬¸êµíšŒ", "ì—°ì„¸ëŒ€ì „ë¬¸êµíšŒ", "ì˜¤íƒœì „ë¬¸êµíšŒ", "ì˜¥ê³„ì „ë¬¸êµíšŒ", "í˜•ê³¡ì „ë¬¸êµíšŒ"],
                    "ìœ„ì„±ì§€ì—­": ["ìœ„ì„±ì§€ì—­"],
                    "ì „êµ­ì§€ì—­": ["ì „êµ­ì§€ì—­"],
                    "êµ­ê°€ë³„í›„ì›ë‹´ë‹¹": ["ë„¤íŒ”", "ëŒ€ë§Œ", "ë™ë¶ì•„", "ë¼ì˜¤ìŠ¤", "ë ˆë°”ë…¼", "ë§ë ˆì´ì‹œì•„", "ë©•ì‹œì½”", "ëª¨ë¡œì½”", "ëª½ê³¨", "ë¯¸ì–€ë§ˆ", "ë°©ê¸€ë¼ë°ì‹œ", "ë² íŠ¸ë‚¨", "ë¸Œë¼ì§ˆ", "ë¸Œë£¨ë‚˜ì´", "ìŠ¤ë¦¬ë‘ì¹´", "ì‹±ê°€í¬ë¥´", "ì•„ë¥´í—¨í‹°ë‚˜", "ì•„ì œë¥´ë°”ì´ì”", "ì´ë€", "ì´ìŠ¤ë¼ì—˜", "ì¸ë„", "ì¸ë„ë„¤ì‹œì•„", "ì¼ë³¸", "ì¹´ìíìŠ¤íƒ„", "ìº„ë³´ë””ì•„", "ì¼€ëƒ", "í‚¤ë¥´ê¸°ìŠ¤ìŠ¤íƒ„", "íƒœêµ­", "íŠ€ë¥´í‚¤ì˜ˆ", "í•„ë¦¬í•€", "í™ì½©"]
                }
            },
            "ê¸°ê´€ì„ì›": {
                type: "committee",
                departments: {
                    "ë‚¨ì „ë„íšŒ": ["ì œ1ë‚¨ì „ë„íšŒ", "ì œ2ë‚¨ì „ë„íšŒ", "ì œ3ë‚¨ì „ë„íšŒ", "ì œ4ë‚¨ì „ë„íšŒ"],
                    "ì—¬ì „ë„íšŒ": ["ì—¬ì „ë„íšŒ", "ì œ1ì—¬ì „ë„íšŒ", "ì œ2ì—¬ì „ë„íšŒ", "ì œ3ì—¬ì „ë„íšŒ", "ì œ4ì—¬ì „ë„íšŒ", "ì œ5ì—¬ì „ë„íšŒ", "ì œ6ì—¬ì „ë„íšŒ", "ê½ƒê½‚ì´ë¶€", "êµíšŒì²­ì†Œë‹´ë‹¹"]
                }
            }
        };
        
        // í…Œë§ˆ í† ê¸€
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;
        
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            html.setAttribute('data-theme', 'dark');
            themeToggle.innerHTML = '<span class="icon">â˜€ï¸</span><span class="label">ë¼ì´íŠ¸</span>';
        }
        
        themeToggle.addEventListener('click', () => {
            const isDark = html.getAttribute('data-theme') === 'dark';
            if (isDark) {
                html.removeAttribute('data-theme');
                localStorage.setItem('theme', 'light');
                themeToggle.innerHTML = '<span class="icon">ğŸŒ™</span><span class="label">ë‹¤í¬</span>';
            } else {
                html.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                themeToggle.innerHTML = '<span class="icon">â˜€ï¸</span><span class="label">ë¼ì´íŠ¸</span>';
            }
        });
        
        // ì§ë¶„ì„ ì¡°ì§ì— ë§¤í•‘í•˜ëŠ” í•¨ìˆ˜
        function mapPositionToOrg(position) {
            for (const [committeeName, committee] of Object.entries(organizationStructure)) {
                if (committee.type === "team") {
                    for (const prefix of committee.departments) {
                        if (position.startsWith(prefix)) {
                            return { committee: committeeName, department: null };
                        }
                    }
                } else {
                    for (const [deptName, prefixes] of Object.entries(committee.departments)) {
                        for (const prefix of prefixes) {
                            if (position.startsWith(prefix) || position.includes(prefix)) {
                                return { committee: committeeName, department: deptName };
                            }
                        }
                    }
                }
            }
            return null;
        }
        
        // ì§ë¶„ì—ì„œ ë¶€ì„œëª…ì„ ì œê±°í•˜ê³  ì§§ì€ ì´ë¦„ ë°˜í™˜
        function getShortPositionName(position, department) {
            // ë¶€ì„œ ì ‘ë‘ì–´ ì œê±°
            let shortName = position;
            
            // ì¼ë°˜ì ì¸ êµ­/ë¶€ ì ‘ë‘ì–´ íŒ¨í„´ ì œê±°
            const prefixPatterns = [
                /^(ì˜ˆë°°êµ­|ì°¬ì–‘êµ­|ì¬ì •êµ­|êµìœ¡êµ­|í›ˆë ¨êµ­|ì‚¬ë¬´êµ­|ê²½ì¡°êµ­|ì°¨ëŸ‰êµ­|ì‹œì„¤êµ­|ì‹œì„¤ì•ˆì „êµ­|í•´ì™¸ì„ êµêµ­|êµ­ë‚´ì„ êµêµ­|í‰ì‹ ë„ì„ êµêµ­|ë¯¸ë””ì–´ì„ êµêµ­|ì‚°ì—…ì„ êµêµ­|ê³µë‹¨ì„ êµêµ­|ë†ì•„ì¸ì„ êµêµ­|ì²´ìœ¡ì„ êµêµ­|ëª©íšŒì§€ì›íŒ€)\s*/,
            ];
            
            for (const pattern of prefixPatterns) {
                shortName = shortName.replace(pattern, '');
            }
            
            return shortName || position;
        }
        
        // ì œì§ ì—¬ë¶€ í™•ì¸
        function isJejik(position) {
            return jejikList.includes(position);
        }
        
        // ì œì§ ì¶”ì¶œ
        function extractJejik(positions) {
            return positions.filter(p => isJejik(p));
        }
        
        // ì§ë¶„ ë¶„ë¥˜
        function categorizePositions(positions) {
            const result = {
                jejik: [],
                organized: {}, // { committeeName: { deptName: [positions] } }
                others: []
            };
            
            const uniquePositions = [...new Set(positions)];
            
            for (const pos of uniquePositions) {
                if (isJejik(pos)) {
                    if (!result.jejik.includes(pos)) {
                        result.jejik.push(pos);
                    }
                    continue;
                }
                
                const org = mapPositionToOrg(pos);
                if (org) {
                    const { committee, department } = org;
                    if (!result.organized[committee]) {
                        result.organized[committee] = {};
                    }
                    const deptKey = department || '_direct';
                    if (!result.organized[committee][deptKey]) {
                        result.organized[committee][deptKey] = [];
                    }
                    result.organized[committee][deptKey].push(pos);
                } else {
                    result.others.push(pos);
                }
            }
            
            return result;
        }
        
        // ê²€ìƒ‰ ê²°ê³¼ HTML ìƒì„±
        function renderMemberCard(name, info, query) {
            const categorized = categorizePositions(info.positions);
            const highlightedName = name.replace(new RegExp(query, 'g'), '<span class="highlight">' + query + '</span>');
            const churchName = info.church ? info.church + 'ì•ˆë””ì˜¥êµíšŒ' : 'ì•ˆë””ì˜¥êµíšŒ';
            
            // ì´ë¦„ì—ì„œ ìˆ«ì ì œê±°í•˜ì—¬ íŠ¹ë³„ ì§í•¨ í™•ì¸ (ì˜ˆ: ê¹€ë¯¸ì •1 -> ê¹€ë¯¸ì •)
            const baseName = name.replace(/\d+$/, '');
            
            // ì œì§ í‘œì‹œ (íŠ¹ë³„ ì§í•¨ > ì¼ë°˜ ì œì§ > ì„±ë„)
            let jejikDisplay = 'ì„±ë„';
            if (specialTitles[baseName]) {
                jejikDisplay = specialTitles[baseName];
            } else if (specialTitles[name]) {
                jejikDisplay = specialTitles[name];
            } else if (categorized.jejik.length > 0) {
                jejikDisplay = categorized.jejik.join(', ');
            }
            
            let html = '<div class="result-card">';
            html += '<div class="member-header">';
            html += '<span class="member-name">' + highlightedName + '</span>';
            html += '<span class="jejik-badge">' + jejikDisplay + '</span>';
            html += '</div>';
            html += '<div class="member-church">â›ª ' + churchName + '</div>';
            
            // ìœ„ì›íšŒë³„ ì§ë¶„ í‘œì‹œ
            const committeeOrder = ['ëª©íšŒì§€ì›íŒ€', 'ì˜ˆë°°ìœ„ì›íšŒ', 'êµìœ¡í›ˆë ¨ìœ„ì›íšŒ', 'ì‚¬ë¬´ìœ„ì›íšŒ', 'ì„ êµìœ„ì›íšŒ', 'ì¼ì²œì§€êµíšŒ', 'ê¸°ê´€ì„ì›'];
            
            for (const committeeName of committeeOrder) {
                if (!categorized.organized[committeeName]) continue;
                
                const depts = categorized.organized[committeeName];
                const deptKeys = Object.keys(depts);
                if (deptKeys.length === 0) continue;
                
                html += '<div class="committee-section">';
                html += '<div class="committee-title">' + committeeName + '</div>';
                
                for (const deptKey of deptKeys) {
                    const positions = depts[deptKey];
                    if (positions.length === 0) continue;
                    
                    html += '<div class="department-item">';
                    if (deptKey !== '_direct') {
                        html += '<div class="department-name">[' + deptKey + ']</div>';
                    }
                    html += '<div class="position-list">';
                    
                    const shortNames = positions.map(p => getShortPositionName(p, deptKey));
                    html += shortNames.map(n => '<span class="position-item">' + n + '</span>').join('');
                    
                    html += '</div>';
                    html += '</div>';
                }
                
                html += '</div>';
            }
            
            // ê¸°íƒ€ ì§ë¶„ (ë¶„ë¥˜ë˜ì§€ ì•Šì€ ê²ƒ)
            if (categorized.others.length > 0) {
                html += '<div class="other-positions">';
                html += '<div class="other-title">ê¸°íƒ€</div>';
                html += '<div class="other-list">';
                for (const pos of categorized.others) {
                    html += '<span class="other-tag">' + pos + '</span>';
                }
                html += '</div>';
                html += '</div>';
            }
            
            html += '</div>';
            return html;
        }
        
        // ê²€ìƒ‰ í•¨ìˆ˜
        function search(query) {
            const container = document.getElementById('results');
            
            if (!memberData) {
                container.innerHTML = '<div class="error"><div class="icon">âš ï¸</div><div>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤</div></div>';
                return;
            }
            
            if (!query.trim()) {
                container.innerHTML = '<div class="search-hint"><div class="icon">ğŸ”</div><div>ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</div></div>';
                return;
            }
            
            const results = Object.entries(memberData).filter(([name]) => name.includes(query));
            
            if (results.length === 0) {
                container.innerHTML = '<div class="no-result"><div class="icon">ğŸ˜¢</div><div>"' + query + '" ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div></div>';
                return;
            }
            
            results.sort((a, b) => b[1].positions.length - a[1].positions.length);
            
            let html = '<div class="result-count">"' + query + '" ê²€ìƒ‰ ê²°ê³¼: <strong>' + results.length + '</strong>ëª…</div>';
            
            results.slice(0, 50).forEach(([name, info]) => {
                html += renderMemberCard(name, info, query);
            });
            
            if (results.length > 50) {
                html += '<div style="text-align:center; padding:20px; color:var(--text-muted);">... ì™¸ ' + (results.length - 50) + 'ëª…</div>';
            }
            
            container.innerHTML = html;
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            if (!memberData) return;
            
            let gumi = 0, seoul = 0;
            
            Object.values(memberData).forEach(info => {
                if (info.church === 'êµ¬ë¯¸') gumi++;
                else if (info.church === 'ì„œìš¸') seoul++;
            });
        }
        
        // ë°ì´í„° ë¡œë“œ
        axios.get('data.json')
            .then(response => {
                let data = response.data;
                if (typeof data === 'string') {
                    data = data
                        .split('\n')
                        .map(line => line.trimEnd())
                        .filter(line => line.trim() !== '')
                        .join('\n')
                        .replace(/,(\s*[\]\}])/g, '$1');
                    data = JSON.parse(data);
                }
                
                memberData = data.members;
                
                document.getElementById('searchInput').disabled = false;
                document.getElementById('searchBtn').disabled = false;
                
                updateStats();
                
                document.getElementById('results').innerHTML = 
                    '<div class="search-hint">' +
                    '<div class="icon">ğŸ”</div>' +
                    '<div>ì´ë¦„ì„ ì…ë ¥í•˜ê³  ê²€ìƒ‰í•˜ì„¸ìš”</div>' +
                    '<div class="hint-text">ë¶€ë¶„ ê²€ìƒ‰ ê°€ëŠ¥ (ì˜ˆ: "ê¹€" â†’ ê¹€ì”¨ ì „ì²´)</div>' +
                    '</div>';
                
                document.getElementById('searchBtn').addEventListener('click', () => {
                    search(document.getElementById('searchInput').value);
                });
                
                document.getElementById('searchInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') search(e.target.value);
                });
                
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    if (e.target.value.length >= 1) search(e.target.value);
                });
            })
            .catch(error => {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                document.getElementById('results').innerHTML = 
                    '<div class="error">' +
                    '<div class="icon">âš ï¸</div>' +
                    '<div>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤</div>' +
                    '<div style="font-size:0.85rem; margin-top:8px; opacity:0.7;">data.json íŒŒì¼ì´ ê°™ì€ í´ë”ì— ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”</div>' +
                    '</div>';
            });
    </script>
</body>
</html>